/* Injected as a string into Shadow DOM via ?inline import.
   Uses :host for resets — isolated from all host page styles.
   No Tailwind: Tailwind v4 has :root/:host variable scoping issues in Shadow DOM. */

/* ── Light theme tokens (default) ──────────────────────────────────── */

:host {
  all: initial;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', sans-serif;
  font-size: 13px;
  line-height: 1.4;
  color-scheme: light;

  --toolbar-bg:          #fafafa;
  --toolbar-fg:          #171717;
  --toolbar-muted:       #737373;
  --toolbar-border:      #e5e5e5;
  --toolbar-shadow:      0 4px 20px rgba(0, 0, 0, 0.08), 0 1px 4px rgba(0, 0, 0, 0.04);
  --toolbar-active-border: rgba(108, 99, 255, 0.3);
  --toolbar-active-shadow: 0 4px 20px rgba(0, 0, 0, 0.08), 0 1px 4px rgba(0, 0, 0, 0.04);
  --toolbar-pill-sel:    rgba(212, 212, 212, 0.5);
  --toolbar-pill-hover:  rgba(229, 229, 229, 0.6);
  --toolbar-track-off:   #e5e5e5;

  --badge-raf-bg:        #f0fbf6;
  --badge-raf-fg:        #1a8a5a;
  --badge-raf-border:    #c5ebd7;
  --badge-gsap-bg:       #f3f0ff;
  --badge-gsap-fg:       #5b4fcf;
  --badge-gsap-border:   #d4ceff;
  --badge-waapi-bg:      #fdf8ec;
  --badge-waapi-fg:      #a0740a;
  --badge-waapi-border:  #f0dcac;
  --badge-off-bg:        #f5f5f5;
  --badge-off-fg:        #bbbbbb;
  --badge-off-border:    #e8e8e8;
}

/* ── Dark theme: OS preference (applies when page gives no signal) ── */

@media (prefers-color-scheme: dark) {
  :host {
    color-scheme: dark;

    --toolbar-bg:          #171717;
    --toolbar-fg:          #f5f5f5;
    --toolbar-muted:       #a3a3a3;
    --toolbar-border:      #404040;
    --toolbar-shadow:      0 4px 20px rgba(0, 0, 0, 0.4), 0 1px 4px rgba(0, 0, 0, 0.2);
    --toolbar-active-border: rgba(108, 99, 255, 0.5);
    --toolbar-active-shadow: 0 4px 20px rgba(0, 0, 0, 0.4), 0 1px 4px rgba(0, 0, 0, 0.2);
    --toolbar-pill-sel:    rgba(82, 82, 82, 0.4);
    --toolbar-pill-hover:  rgba(82, 82, 82, 0.3);
    --toolbar-track-off:   #525252;

    --badge-raf-bg:        #0f2820;
    --badge-raf-fg:        #4ecba0;
    --badge-raf-border:    #1a4035;
    --badge-gsap-bg:       #1a1230;
    --badge-gsap-fg:       #8899ff;
    --badge-gsap-border:   #2a1f50;
    --badge-waapi-bg:      #201a0a;
    --badge-waapi-fg:      #d4a640;
    --badge-waapi-border:  #3a2f10;
    --badge-off-bg:        #262626;
    --badge-off-fg:        #525252;
    --badge-off-border:    #404040;
  }
}

/* ── Dark theme: page-level signal (overrides OS preference) ────────── */

:host([data-theme="dark"]) {
  color-scheme: dark;

  --toolbar-bg:          #171717;
  --toolbar-fg:          #f5f5f5;
  --toolbar-muted:       #a3a3a3;
  --toolbar-border:      #404040;
  --toolbar-shadow:      0 4px 20px rgba(0, 0, 0, 0.4), 0 1px 4px rgba(0, 0, 0, 0.2);
  --toolbar-active-border: rgba(108, 99, 255, 0.5);
  --toolbar-active-shadow: 0 4px 20px rgba(0, 0, 0, 0.4), 0 1px 4px rgba(0, 0, 0, 0.2);
  --toolbar-pill-sel:    rgba(108, 99, 255, 0.2);
  --toolbar-pill-hover:  rgba(255, 255, 255, 0.06);
  --toolbar-track-off:   #525252;

  --badge-raf-bg:        #0f2820;
  --badge-raf-fg:        #4ecba0;
  --badge-raf-border:    #1a4035;
  --badge-gsap-bg:       #1a1230;
  --badge-gsap-fg:       #8899ff;
  --badge-gsap-border:   #2a1f50;
  --badge-waapi-bg:      #201a0a;
  --badge-waapi-fg:      #d4a640;
  --badge-waapi-border:  #3a2f10;
  --badge-off-bg:        #262626;
  --badge-off-fg:        #525252;
  --badge-off-border:    #404040;
}

/* ── Light theme: explicit page signal (overrides OS dark preference) ── */

:host([data-theme="light"]) {
  color-scheme: light;

  --toolbar-bg:          #fafafa;
  --toolbar-fg:          #171717;
  --toolbar-muted:       #737373;
  --toolbar-border:      #e5e5e5;
  --toolbar-shadow:      0 4px 20px rgba(0, 0, 0, 0.08), 0 1px 4px rgba(0, 0, 0, 0.04);
  --toolbar-active-border: rgba(108, 99, 255, 0.3);
  --toolbar-active-shadow: 0 4px 20px rgba(0, 0, 0, 0.08), 0 1px 4px rgba(0, 0, 0, 0.04);
  --toolbar-pill-sel:    rgba(212, 212, 212, 0.5);
  --toolbar-pill-hover:  rgba(229, 229, 229, 0.6);
  --toolbar-track-off:   #e5e5e5;

  --badge-raf-bg:        #f0fbf6;
  --badge-raf-fg:        #1a8a5a;
  --badge-raf-border:    #c5ebd7;
  --badge-gsap-bg:       #f3f0ff;
  --badge-gsap-fg:       #5b4fcf;
  --badge-gsap-border:   #d4ceff;
  --badge-waapi-bg:      #fdf8ec;
  --badge-waapi-fg:      #a0740a;
  --badge-waapi-border:  #f0dcac;
  --badge-off-bg:        #f5f5f5;
  --badge-off-fg:        #bbbbbb;
  --badge-off-border:    #e8e8e8;
}

/* ── Toolbar shell ─────────────────────────────────────────────────── */

.toolbar {
  position: fixed;
  top: 16px;
  right: 16px;
  background: var(--toolbar-bg);
  border: 1px solid var(--toolbar-border);
  border-radius: 12px;
  padding: 10px 12px 8px;
  min-width: 210px;
  box-shadow: var(--toolbar-shadow);
  color: var(--toolbar-fg);
  user-select: none;
  pointer-events: all;
  transition: border-color 0.15s, box-shadow 0.15s;
}

.toolbar.active {
  border-color: var(--toolbar-active-border);
  box-shadow: var(--toolbar-active-shadow);
}

/* ── Drag handle / header row ──────────────────────────────────────── */

.header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  cursor: grab;
  margin-bottom: 9px;
  gap: 8px;
}

.header:active {
  cursor: grabbing;
}

.logo {
  font-weight: 700;
  font-size: 13px;
  letter-spacing: -0.2px;
  color: var(--toolbar-fg);
  flex: 1;
  pointer-events: none;
}


/* ── Status badges ─────────────────────────────────────────────────── */

.badges {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  min-height: 18px;
}

.badge {
  font-size: 10px;
  padding: 2px 7px;
  border-radius: 4px;
  font-weight: 500;
  letter-spacing: 0.1px;
}

.badge-raf {
  background: var(--badge-raf-bg);
  color: var(--badge-raf-fg);
  border: 1px solid var(--badge-raf-border);
}

.badge-gsap {
  background: var(--badge-gsap-bg);
  color: var(--badge-gsap-fg);
  border: 1px solid var(--badge-gsap-border);
}

.badge-waapi {
  background: var(--badge-waapi-bg);
  color: var(--badge-waapi-fg);
  border: 1px solid var(--badge-waapi-border);
}

.badge-inactive {
  background: var(--badge-off-bg);
  color: var(--badge-off-fg);
  border: 1px solid var(--badge-off-border);
}
